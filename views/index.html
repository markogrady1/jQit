<!doctype html>
<html>
<head>
	<title>Issue Tracker</title>
	<link rel='stylesheet' href='/css/style.css' />
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	 <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="/js/scrilla.js"></script>
</head>
<body>

<script> 

var data = [<%=issuesNo%>];
    var w = 800;
    var h = 1850;

    var x = d3.scale.linear()
    	      .domain([0, d3.max(data)])
    	      .range([0, w]);

    var y = d3.scale.linear()
    		  .domain([0, data.length])
    		  .range([0, h]);

    var svg = d3.select('body').append('svg')
                .attr('id', 'chart')
                .attr('width', w)
                .attr('height', h);
    // add bar values for x & y 
    svg.selectAll('bar')
       .data(data)
       .enter()
           .append('rect')
           .classed('bar', true)
           .attr('x', 0)
           .attr('y', function(d, i){
           		return y(i);
           })
           .attr('width', function(d, i){
           		return x(d);
           })
           .attr('height', function(d, i){
           		return y(1) -1;
           });
    svg.selectAll('bar-label')
	    .data(data)
	    .enter()
	        .append('text')
	        .classed('bar-label', true)
	        .attr('x', function(d, i){

	        	var val = (x(d) < 30) ? x(d): x(d)- 30 ;
	        	return val;

	        })
	        .attr('y', function(d, i){
           		return y(i);
            })
            .attr('dy', function(d, i){
            	return y(1) / 1.5;
            })
	        .text(function(d, i){
	        	return d;
	        })
</script>
<div class="chart-area"></div>

<div class="button-wrap">
<% for (var i = 0; i < names.length; i++) { %>
   <a href=repo/details/<%= names[i] %>><div class='open-issue-repo'><%= names[i] %><span class='issue-count' ><%= issuesNo[i] %></span></div></a>   
<% } %> 
</div>
<script>
scroller.init(); 
</script>
</body>
</html>